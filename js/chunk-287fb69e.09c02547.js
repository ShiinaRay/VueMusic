(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-287fb69e"],{"055e":function(s,t,e){"use strict";e("b9d3")},1045:function(s,t,e){"use strict";var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return 0!==s.songlist.length?e("div",{staticClass:"songlist"},[e("div",{staticClass:"song-list"},s._l(s.songlist,(function(s,t){return e("song-list-item",{key:t,attrs:{songlistitem:s}})})),1)]):s._e()},n=[],a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return 0!==Object.keys(s.songlistitem).length?e("div",{staticClass:"item",on:{click:s.listItemClick}},[e("div",{staticClass:"item-img",on:{mouseenter:s.showIcon,mouseleave:s.closeIcon}},[e("transition",{attrs:{name:"el-fade-in-linear"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.isShowPlay,expression:"isShowPlay"}],staticClass:"mask-playicon"},[e("span",{staticClass:"iconfont icon-play"})])]),e("transition",{attrs:{name:"el-zoom-in-top"}},[s.songlistitem.playCount?e("div",{directives:[{name:"show",rawName:"v-show",value:s.isShowIcon,expression:"isShowIcon"}],staticClass:"mask1"},[e("span",{staticClass:"iconfont icon-yinle"}),e("span",[s._v(s._s(s._f("formatNum")(s.songlistitem.playCount)))])]):s._e()]),e("transition",{attrs:{name:"el-zoom-in-bottom"}},[s.songlistitem.creator?e("div",{directives:[{name:"show",rawName:"v-show",value:s.isShowIcon,expression:"isShowIcon"}],staticClass:"mask2"},[e("span",{staticClass:"iconfont"},[s._v("")]),e("span",[s._v(s._s(s.songlistitem.creator.nickname))])]):s._e()]),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.showImg,expression:"showImg"}],attrs:{alt:""}})],1),e("div",{staticClass:"item-text"},[e("div",[s._v(s._s(s.songlistitem.name))])])]):s._e()},o=[],r={name:"SongListItem",props:{songlistitem:{type:Object,default(){return{}}}},data(){return{isShowIcon:!0,isShowPlay:!1}},computed:{showImg(){return this.songlistitem.picUrl||this.songlistitem.coverImgUrl}},methods:{showIcon(){this.isShowIcon=!1,this.isShowPlay=!0},closeIcon(){this.isShowIcon=!0,this.isShowPlay=!1},listItemClick(){this.$router.push("/songlistdetail/"+this.songlistitem.id),this.isShowPlay=!1,this.isShowIcon=!0}}},l=r,c=(e("c264"),e("2877")),d=Object(c["a"])(l,a,o,!1,null,"ddd9efac",null),u=d.exports,h={components:{SongListItem:u},name:"SongList",props:{songlist:{type:Array,default(){return[]}}}},m=h,g=(e("055e"),Object(c["a"])(m,i,n,!1,null,"04b93b2e",null));t["a"]=g.exports},"7f84":function(s,t,e){},a7ad:function(s,t,e){"use strict";e("7f84")},b9d3:function(s,t,e){},c264:function(s,t,e){"use strict";e("fd5a")},fd00:function(s,t,e){"use strict";e.r(t);var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"w",attrs:{id:"user-detail"}},[s.$store.state.isLogin?e("div",{staticClass:"logined"},[e("div",{staticClass:"top-userinfo"},[e("div",{staticClass:"left-avatar"},[e("img",{attrs:{src:s.currentUserInfo.avatarUrl,alt:""}})]),e("div",{staticClass:"right-info"},[e("div",{staticClass:"row1"},[e("div",{staticClass:"uname"},[e("h2",[s._v(s._s(s.currentUserInfo.nickname))]),e("div",{staticClass:"gender"},[1==s.currentUserInfo.gender?e("span",{staticClass:"iconfont icon-nan"}):2==s.currentUserInfo.gender?e("span",{staticClass:"iconfont icon-nv"}):s._e()]),e("el-tag",{attrs:{size:"small",effect:"light"}},[s._v("Lv:"+s._s(s.currentUserInfo.level))])],1),s.uid!=s.$store.state.userInfo.userId?e("el-button",{staticClass:"subuser",attrs:{size:"small",icon:s.isSub?"el-icon-check":"el-icon-plus",type:s.isSub?"primary":"default"},on:{click:s.subUserBy}},[s._v(s._s(s.isSub?"已关注":"关注"))]):s._e()],1),s.currentUserInfo.identify?e("div",{staticClass:"singer"},[e("span",[e("img",{attrs:{src:s.currentUserInfo.identify.imageUrl,alt:""}})]),e("i",[s._v(s._s(s.currentUserInfo.identify.imageDesc))])]):s._e(),e("div",{staticClass:"my-data"},[e("div",{staticClass:"data-info"},[e("div",{staticClass:"data-num"},[e("div",{staticClass:"num-item",staticStyle:{"padding-left":"0"}},[e("h2",[s._v(s._s(s.currentUserInfo.eventCount))]),e("div",[s._v("动态")])]),e("div",{staticClass:"num-item",staticStyle:{"border-right":"solid 1px #dddddd","border-left":"solid 1px #dddddd"},on:{click:s.toFollows}},[e("h2",[s._v(s._s(s.currentUserInfo.follows))]),e("div",[s._v("关注")])]),e("div",{staticClass:"num-item",on:{click:s.toFansList}},[e("h2",[s._v(s._s(s._f("formatNum")(s.currentUserInfo.followeds)))]),e("div",[s._v("粉丝")])])]),e("div",{staticClass:"base-info"},[e("div",[s._v(" 用户ID："),e("span",[s._v(s._s(s.uid))])]),e("div",[s._v(" 个人介绍："),e("span",[s._v(s._s(""==s.currentUserInfo.signature?"暂无介绍":s.currentUserInfo.signature))])])])]),e("div",{staticClass:"my-record",on:{click:s.toRecord}},[e("div",{staticClass:"iconfont icon-paixingbang"}),e("div",[s._v("听歌排行")])])])])]),0!==s.createdSongList.length?e("div",{staticClass:"mycreat"},[e("el-divider",{attrs:{"content-position":"left"}},[e("h2",[e("span",[s._v(s._s(s.currentUserInfo.nickname))]),s._v("创建的歌单("+s._s(s.createdSongList.length)+") ")])]),e("SongList",{attrs:{songlist:s.createdSongList}})],1):s._e(),0!==s.collectSongList.length?e("div",{staticClass:"mycollect"},[e("el-divider",{attrs:{"content-position":"left"}},[e("h2",[e("span",[s._v(s._s(s.currentUserInfo.nickname))]),s._v("收藏的歌单("+s._s(s.collectSongList.length)+") ")])]),e("SongList",{attrs:{songlist:s.collectSongList}})],1):s._e()]):e("div",{staticClass:"nologin"},[e("el-empty",{attrs:{description:"登录后才能查看","image-size":200}})],1)])},n=[],a=e("1f56"),o=e("2f62"),r=e("1045"),l={inject:["reload"],name:"UserDetail",components:{SongList:r["a"]},data(){return{uid:null,currentUserInfo:{},userSongList:[],collectSongList:[],createdSongList:[],isSub:!1}},computed:{...Object(o["b"])(["userFollowsList","userInfo"])},created(){this.$store.state.isLogin?(this.uid=this.$route.params.uid,this.getUserDetailBy(),this.getUserSonglistBy(),0!==this.userFollowsList.length?this.isSubUser():this.getLoginUserFollows()):this.$message({type:"warning",message:"登录后才能查看",showClose:!0,center:!0})},methods:{getUserDetailBy(){Object(a["a"])(this.uid).then(s=>{s.data.profile.level=s.data.level,s.data.identify&&(s.data.profile.identify=s.data.identify),this.currentUserInfo=s.data.profile})},getUserSonglistBy(){Object(a["f"])(this.uid).then(s=>{this.userSongList=s.data.playlist;let t=this.userSongList.findIndex(s=>s.creator.userId!=this.uid);this.createdSongList=this.userSongList.slice(0,t),this.collectSongList=this.userSongList.slice(t)})},toFollows(){this.$router.push({name:"Follows",params:{uid:this.uid,uname:this.currentUserInfo.nickname,follows:this.currentUserInfo.follows}})},toFansList(){this.$router.push({name:"FansList",params:{uid:this.uid,uname:this.currentUserInfo.nickname}})},toRecord(){this.$router.push("/userdetail/record/"+this.uid)},getLoginUserFollows(s=1){let t=1e3,e=(s-1)*t;Object(a["d"])(this.userInfo.userId,e,t).then(s=>{this.$store.dispatch("saveUserFollowsList",s.data.follow),this.isSubUser()})},isSubUser(){let s=this.userFollowsList.findIndex(s=>s.userId==this.uid);this.isSub=-1!=s},subUserBy(){let s=this.isSub?2:1;Object(a["g"])(s,this.uid).then(t=>{200==t.data.code&&(this.getLoginUserFollows(),1==s?this.$message({type:"success",message:"关注成功",center:!0}):this.$message({type:"success",message:"已取消关注",center:!0}))}).catch(s=>this.$message.warning("操作失败,请重试"))}},watch:{$route(s,t){s!==t&&this.reload()}}},c=l,d=(e("a7ad"),e("2877")),u=Object(d["a"])(c,i,n,!1,null,"d54810b2",null);t["default"]=u.exports},fd5a:function(s,t,e){}}]);
//# sourceMappingURL=chunk-287fb69e.09c02547.js.map