(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ba90dbf"],{"316a":function(t,e,s){"use strict";s("6856")},"40a1":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songs,"empty-text":"数据加载中~","row-class-name":t.tableRowClassName},on:{"row-dblclick":t.playMusic}},[s("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id==t.nowSongDetail.id?s("span",{staticClass:"iconfont",class:t.isPlaying?" icon-voice":"icon-jingyin_laba"}):s("span",[t._v(t._s(t._f("formatIndex")(e.row.index)))])]}}])}),s("el-table-column",{attrs:{width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"operation"},[s("span",{class:-1!==t.likeSongIds.indexOf(e.row.id)?"iconfont icon-xihuan2":"iconfont icon-xihuan",attrs:{title:-1!==t.likeSongIds.indexOf(e.row.id)?"取消喜欢":"喜欢"},on:{click:function(s){return t.likeSong(e.row)}}}),s("span",{staticClass:"iconfont icon-xiazai",attrs:{title:"下载"},on:{click:function(s){return t.downloadCurrentMusic(e.row)}}}),s("span",{staticClass:"el-icon-plus",attrs:{title:"添加到播放列表"},on:{click:function(s){return t.addSong(e.row)}}})])]}}])}),s("el-table-column",{attrs:{prop:"name",label:"歌曲",width:"300","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"songname"},[t._v(" "+t._s(e.row.name)+" "),1==e.row.fee?s("i",{staticClass:"iconfont icon-vip"}):t._e(),0!=e.row.mv?s("i",{staticClass:"iconfont icon-mv",on:{click:function(s){return t.toMvDetail(e.row.mv)}}}):t._e()])]}}])}),s("el-table-column",{attrs:{prop:"al.name",label:"专辑","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"sthover",on:{click:function(s){return t.toAlbum(e.row.al.id)}}},[t._v(" "+t._s(e.row.al.name)+" ")])]}}])}),s("el-table-column",{attrs:{prop:"ar[0].name",label:"歌手","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"sthover",on:{click:function(s){return t.toSinger(e.row.ar[0].id)}}},[t._v(" "+t._s(e.row.ar[0].name)+" ")])]}}])}),s("el-table-column",{attrs:{prop:"dt",label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(" "+t._s(t._f("formatDuration")(e.row.dt))+" ")])]}}])})],1)],1)},i=[],n=s("5cd6"),o=s("2f62"),r={name:"SongTable",props:{songs:{type:Array,default(){return[]}}},data(){return{islike:!1,currentIndex:null}},computed:{...Object(o["b"])(["isPlaying","nowSongDetail","isLogin","userInfo","userSongList","likeSongIds"])},filters:{formatIndex(t){return t<9?"0"+(t+1):t+1}},created(){this.isLogin&&0===this.likeSongIds.length&&this.getUserLikSongs()},methods:{playMusic(t){Object(n["a"])(t.id).then(e=>{Object(n["d"])(t.id).then(t=>{this.$store.dispatch("saveSongUrl",t.data.data[0].url)}),this.$store.dispatch("changePlayState",!0),this.$store.dispatch("saveSongDetail",t),this.$store.dispatch("addPlayinglist",t)}).catch(t=>{this.$message({message:"暂时无法播放，换首试试",type:"warning",center:!0})})},getUserLikSongs(){Object(n["b"])(this.userInfo.userId).then(t=>{Array.isArray(t.data.ids)&&0!=t.data.ids.length&&this.$store.dispatch("saveLikeSongIds",t.data.ids)})},likeSong(t){if(!this.$store.state.isLogin)return void this.$message({type:"warning",message:"登录后才能收藏",showClose:!0,center:!0});let e=-1===this.likeSongIds.indexOf(t.id);this.userSongList[0].id!=this.$route.params.id?this.likeNowSongBy(t,e):this.$confirm("确定将选中歌曲从我喜欢的音乐中删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:""}).then(()=>{this.likeNowSongBy(t,e),this.$emit("updateSonglist")}).catch(t=>{})},likeNowSongBy(t,e){Object(n["e"])(t.id,e).then(t=>{this.getUserLikSongs(),!0===e?(this.$message({message:"已添加到我喜欢的音乐",type:"success",center:!0}),this.islike=!0):(this.$message({message:"取消喜欢成功",type:"success",center:!0}),this.islike=!1)}).catch(t=>{this.$message.warning("操作失败,请重试")})},downloadCurrentMusic(t){Object(n["a"])(t.id).then(e=>{Object(n["d"])(t.id).then(e=>{let s=e.data.data[0].url,a={url:s,name:t.name+" - "+t.ar[0].name};this.$store.commit("updateDownloadMusicInfo",a)})}).catch(t=>{this.$message({message:"暂无版权，无法下载",type:"warning",center:!0})})},addSong(t){this.$store.dispatch("addPlayinglist",t),this.$message({message:"已添加到播放列表",type:"success",center:!0})},toSinger(t){this.$router.push("/singerdetail/"+t)},toAlbum(t){this.$router.push("/albumdetail/"+t)},toMvDetail(t){this.$router.push({name:"VideoDetail",params:{id:t,type:"mv"}})},tableRowClassName({row:t,rowIndex:e}){if(t.index=e,e%2!==0)return"rowEven"}}},l=r,c=(s("316a"),s("2877")),d=Object(c["a"])(l,a,i,!1,null,"2fedf183",null);e["a"]=d.exports},6856:function(t,e,s){},7124:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-res"},[s("div",{staticClass:"result"},[s("h3",[t._v(" 搜索"),s("span",[t._v(t._s(this.keywords))]),t._v(",找到"+t._s(t.songResCount)+"首单曲 ")]),0!==Object.keys(t.matchSinger).length||0!==Object.keys(t.matchAlbum).length?s("div",{staticClass:"match"},[s("h3",[t._v("最佳匹配")]),s("div",{staticClass:"goodMatch"},[0!==Object.keys(t.matchSinger).length?s("div",{staticClass:"matchitem",on:{click:t.goSingerdetail}},[s("div",{staticClass:"cover"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.matchSinger.img1v1Url,expression:"matchSinger.img1v1Url"}],attrs:{alt:""}})]),s("div",{staticClass:"iname"},[s("span",[t._v("歌手："+t._s(t.matchSinger.name))]),s("span",{staticClass:"iconfont icon-xiayiye"})])]):t._e(),0!==Object.keys(t.matchAlbum).length?s("div",{staticClass:"matchitem",on:{click:t.goAlbumdetail}},[s("div",{staticClass:"cover"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.matchAlbum.picUrl,expression:"matchAlbum.picUrl"}],attrs:{alt:""}})]),s("div",{staticClass:"iname"},[s("span",[t._v("专辑："+t._s(t.matchAlbum.name))]),s("span",{staticClass:"iconfont icon-xiayiye"})])]):t._e()])]):t._e()]),s("SongTable",{attrs:{songs:t.songRes}}),s("Pagination",{attrs:{total:t.songResCount,"page-size":50},on:{handleCurrentChange:t.getSearchSongBy}})],1)},i=[],n=s("aca0"),o=s("40a1"),r={name:"SongRes",components:{SongTable:o["a"]},data(){return{keywords:"",songRes:[],songResCount:0,matchSinger:{},matchAlbum:{}}},created(){this.keywords=this.$route.params.keywords,this.getSearchSongBy(),this.getGoodMatchBy()},methods:{getSearchSongBy(t=1){let e=50*(t-1);Object(n["f"])(this.keywords,e).then(t=>{this.songRes=t.data.result.songs,this.songResCount=t.data.result.songCount})},getGoodMatchBy(){Object(n["a"])(this.keywords).then(t=>{this.matchSinger=t.data.result.artist[0],this.matchAlbum=t.data.result.album[0]}).catch(t=>t)},goSingerdetail(){this.$router.push("/singerdetail/"+this.matchSinger.id)},goAlbumdetail(){this.$router.push("/albumdetail/"+this.matchAlbum.id)}}},l=r,c=(s("87aa"),s("2877")),d=Object(c["a"])(l,a,i,!1,null,"75ffe068",null);e["default"]=d.exports},"87aa":function(t,e,s){"use strict";s("d3bf")},d3bf:function(t,e,s){}}]);
//# sourceMappingURL=chunk-6ba90dbf.cf6d6c5e.js.map