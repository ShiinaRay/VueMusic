(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48783791"],{"055c":function(t,i,e){"use strict";e.d(i,"a",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"b",(function(){return r}));var s=e("1bab");function a(){return Object(s["b"])({url:"/album/sublist",params:{timestamp:Date.parse(new Date),limit:48}})}function n(){return Object(s["b"])({url:"/artist/sublist",params:{timestamp:Date.parse(new Date),limit:48}})}function r(){return Object(s["b"])({url:"/mv/sublist",params:{timestamp:Date.parse(new Date),limit:40}})}},"05bc":function(t,i,e){"use strict";e("59d7")},"082b":function(t,i,e){},"2dcc":function(t,i,e){},"35b3":function(t,i,e){"use strict";e("2dcc")},"3d40":function(t,i,e){"use strict";e.d(i,"c",(function(){return a})),e.d(i,"e",(function(){return n})),e.d(i,"h",(function(){return r})),e.d(i,"g",(function(){return o})),e.d(i,"n",(function(){return d})),e.d(i,"a",(function(){return c})),e.d(i,"b",(function(){return l})),e.d(i,"d",(function(){return u})),e.d(i,"j",(function(){return m})),e.d(i,"i",(function(){return v})),e.d(i,"l",(function(){return p})),e.d(i,"o",(function(){return f})),e.d(i,"m",(function(){return h})),e.d(i,"k",(function(){return b})),e.d(i,"f",(function(){return y}));var s=e("1bab");function a(t,i,e,a,n){return Object(s["b"])({url:"/mv/all",params:{area:t,type:i,order:e,offset:a,limit:n}})}function n(t){return Object(s["b"])({url:"/mv/detail",params:{mvid:t}})}function r(t){return Object(s["b"])({url:"/simi/mv",params:{mvid:t}})}function o(t){return Object(s["b"])({url:"/mv/url",params:{id:t}})}function d(t,i){return Object(s["b"])({url:"/mv/sub",params:{t:t,mvid:i,timestamp:Date.parse(new Date)}})}function c(){return Object(s["b"])({url:"/video/group/list"})}function l(){return Object(s["b"])({url:"/video/category/list"})}function u(t,i){return Object(s["b"])({url:"/video/group",params:{id:t,offset:i}})}function m(t){return Object(s["b"])({url:"/video/detail",params:{id:t}})}function v(t){return Object(s["b"])({url:"/related/allvideo",params:{id:t}})}function p(t){return Object(s["b"])({url:"/video/url",params:{id:t}})}function f(t,i){return Object(s["b"])({url:"/video/sub",params:{t:t,id:i,timestamp:Date.parse(new Date)}})}function h(t,i,e){return Object(s["b"])({url:"/resource/like",params:{t:t,type:i,id:e,timestamp:Date.parse(new Date)}})}function b(t){return Object(s["b"])({url:"/video/detail/info",params:{vid:t,timestamp:Date.parse(new Date)}})}function y(t){return Object(s["b"])({url:"/mv/detail/info",params:{mvid:t,timestamp:Date.parse(new Date)}})}},"436b":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"video-detail w"},[e("div",{staticClass:"left-detail"},["mv"==t.$route.params.type?e("h2",{staticStyle:{"padding-bottom":"15px"}},[t._v("MV详情")]):e("h2",{staticStyle:{"padding-bottom":"15px"}},[t._v("视频详情")]),e("div",{staticClass:"video-play"},[e("video",{attrs:{src:t.mvUrl||t.videoUrl,controls:"controls",autoplay:"autoplay",loop:"loop"}})]),e("Videoinfo",{attrs:{videoinfo:t.videoinfo,type:t.$route.params.type,"is-sub":t.isSub,islike:t.isLikeInfo.liked},on:{subMvBy:t.subMvBy,likeVideoBy:t.likeVideoBy}}),e("div",{ref:"comment",staticClass:"video-comment"},[e("h3",{staticStyle:{"padding-bottom":"5px"}},[t._v("评论")]),e("CommentPage",{attrs:{"comment-type":t.commentType,"commentres-id":t.id},on:{changePage:t.changePage}})],1)],1),e("div",{staticClass:"right-recvideo"},[e("Similarvideo",{attrs:{similarvideo:t.similarvideo,type:t.$route.params.type}})],1)])},a=[],n=e("3d40"),r=e("055c"),o=e("2f62"),d=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"video-info"},[e("div",{staticClass:"auther"},[e("div",{staticClass:"block"},[e("img",{attrs:{src:t.showAvatar}})]),"mv"==t.type?e("span",{on:{click:t.toSingerDetail}},[t._v(t._s(t.videoinfo.artistName))]):t._e(),t.videoinfo.creator?e("span",{on:{click:t.toUserDetail}},[t._v(t._s(t.videoinfo.creator.nickname))]):t._e()]),e("div",{staticClass:"title"},[e("h2",[t._v(t._s(t.videoinfo.name||t.videoinfo.title))])]),t.videoinfo.description?e("div",{staticClass:"desc"},[t._v(" "+t._s(t.videoinfo.description)+" ")]):t._e(),e("div",{staticClass:"time"},[e("span",[t._v("发布："+t._s(t._f("showDate")(t.videoinfo.publishTime)))]),e("span",[t._v("播放："+t._s(t._f("formatNum")(t.videoinfo.playCount||t.videoinfo.playTime)))])]),e("div",{staticClass:"opreation"},[e("el-button",{staticClass:"iconfont icon-dianzan",attrs:{type:t.islike?"primary":"default"},on:{click:t.likeVideo}},[t._v(t._s(t.islike?"已赞":"点赞"))]),e("el-button",{attrs:{icon:t.isSub?"el-icon-folder-checked":"el-icon-folder-add",type:t.isSub?"primary":"default"},on:{click:t.subMv}},[t._v(t._s(t.isSub?"已收藏":"收藏"))]),e("el-button",{attrs:{icon:"el-icon-share"}},[t._v("分享")])],1)])},c=[],l=e("0df0"),u=e("90b9"),m={name:"Videoinfo",props:{videoinfo:{type:Object,default(){return{}}},type:{type:String},isSub:{type:Boolean,default(){return!1}},islike:{type:Boolean,default(){return!1}}},filters:{showDate(t){const i=new Date(t);return Object(l["a"])(i,"yyyy-MM-dd")}},computed:{showAvatar(){let t="mv"==this.type?Object(u["c"])(this.videoinfo.artists)&&this.videoinfo.artists[0].img1v1Url:this.videoinfo.avatarUrl;return t}},methods:{subMv(){this.$store.state.isLogin?this.$emit("subMvBy"):this.$message({type:"warning",message:"登录后才能收藏",showClose:!0,center:!0})},likeVideo(){this.$store.state.isLogin?this.$emit("likeVideoBy"):this.$message({type:"warning",message:"登录后才能点赞",showClose:!0,center:!0})},toUserDetail(){this.$router.push("/userdetail/"+this.videoinfo.creator.userId)},toSingerDetail(){this.$router.push("/singerdetail/"+this.videoinfo.artistId)}}},v=m,p=(e("05bc"),e("2877")),f=Object(p["a"])(v,d,c,!1,null,"cee9ba16",null),h=f.exports,b=e("5501"),y=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"similar-video"},[e("h2",[t._v("相关推荐")]),t._l(t.similarvideo,(function(t,i){return e("simi-video-item",{key:i,attrs:{simiitem:t}})}))],2)},g=[],k=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"simiitem",on:{click:t.simiVideoClick}},[e("div",{staticClass:"item-img"},[e("img",{staticClass:"bgImg",attrs:{src:t.simiitem.cover||t.simiitem.coverUrl,alt:""}}),e("img",{attrs:{src:t.simiitem.cover||t.simiitem.coverUrl,alt:""}}),e("div",{staticClass:"play-icon"},[e("span",{staticClass:"iconfont icon-play-square"}),t._v(" "+t._s(t._f("formatNum")(t.simiitem.playCount||t.simiitem.playTime))+" ")]),e("div",{staticClass:"playduration"},[e("span",[t._v(t._s(t._f("formatDuration")(t.simiitem.duration||t.simiitem.durationms)))])])]),e("div",{staticClass:"item-text"},[e("div",{staticClass:"tname"},[t._v(t._s(t.simiitem.name||t.simiitem.title))]),e("p",{staticClass:"by"},[t._v("by "+t._s(t.simiitem.artistName||t.simiitem.creator[0].userName))])])])},_=[],j={name:"Simivideoitem",props:{simiitem:{type:Object,default(){return{}}}},methods:{simiVideoClick(){"mv"==this.$route.params.type?this.$router.push({name:"VideoDetail",params:{id:this.simiitem.id,type:"mv"}}):"video"==this.$route.params.type&&this.$router.push({name:"VideoDetail",params:{id:this.simiitem.vid,type:"video"}})}}},O=j,S=(e("35b3"),Object(p["a"])(O,k,_,!1,null,"2ed35f27",null)),C=S.exports,D={components:{SimiVideoItem:C},name:"Similarvideo",props:{similarvideo:{type:Array,default(){return[]}},type:{type:String}}},B=D,M=Object(p["a"])(B,y,g,!1,null,"15e29cf3",null),w=M.exports,V={inject:["reload"],name:"VideoDetail",components:{Videoinfo:h,CommentPage:b["a"],Similarvideo:w},data(){return{id:"",type:"",videoinfo:{},similarvideo:[],mvUrl:"",videoUrl:"",isSub:!1,isLikeInfo:{},commentType:Number}},computed:{...Object(o["b"])(["subMvlist"])},created(){document.querySelector(".view").scrollTop=0,this.id=this.$route.params.id,this.type=this.$route.params.type,"mv"==this.type?(this.commentType=1,this.getMvDetailBy(),this.getSimiMvBy(),this.getMvUrlBy(),this.getMvLikeInfoBy()):"video"==this.type&&(this.commentType=5,this.getVideoDetailBy(),this.getSimiVideoBy(),this.getVideoUrlBy(),this.getVideoLikeInfoBy()),0==this.subMvlist.length&&this.getSubMvBy(),this.isSubMv()},methods:{getMvDetailBy(){Object(n["e"])(this.id).then(t=>{this.videoinfo=t.data.data})},getSimiMvBy(){Object(n["h"])(this.id).then(t=>{this.similarvideo=t.data.mvs})},getMvUrlBy(){Object(n["g"])(this.id).then(t=>{this.mvUrl=t.data.data.url})},getMvLikeInfoBy(){Object(n["f"])(this.id).then(t=>{this.isLikeInfo=t.data})},getVideoDetailBy(){Object(n["j"])(this.id).then(t=>{this.videoinfo=t.data.data})},getSimiVideoBy(){Object(n["i"])(this.id).then(t=>{this.similarvideo=t.data.data})},getVideoUrlBy(){Object(n["l"])(this.id).then(t=>{this.videoUrl=t.data.urls[0].url})},getVideoLikeInfoBy(){Object(n["k"])(this.id).then(t=>{this.isLikeInfo=t.data,console.log(t)})},changePage(){let t=document.querySelector(".view");t.scrollTop=this.$refs.comment.offsetTop},getSubMvBy(){Object(r["b"])().then(t=>{this.$store.dispatch("saveFavoriteMv",t.data.data),this.isSubMv()})},isSubMv(){let t=this.subMvlist.findIndex(t=>t.vid==this.id);this.isSub=-1!=t},subMvBy(){let t=this.isSub?2:1;"mv"==this.type?Object(n["n"])(t,this.id).then(t=>{200==t.data.code&&this.getSubMvBy()}):Object(n["o"])(t,this.id).then(t=>{200==t.data.code&&this.getSubMvBy()})},likeVideoBy(){let t=this.isLikeInfo.liked?2:1;if("mv"==this.type){let i=1;Object(n["m"])(t,i,this.id).then(t=>{this.isLikeInfo.liked=!this.isLikeInfo.liked})}else{let i=5;Object(n["m"])(t,i,this.id).then(t=>{this.isLikeInfo.liked=!this.isLikeInfo.liked})}}},watch:{$route(t,i){t!==i&&this.reload()}}},$=V,I=(e("d15a"),Object(p["a"])($,s,a,!1,null,"0b37f427",null));i["default"]=I.exports},"59d7":function(t,i,e){},d15a:function(t,i,e){"use strict";e("082b")}}]);
//# sourceMappingURL=chunk-48783791.096950e6.js.map